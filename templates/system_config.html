<!DOCTYPE html>
<html>

<head>
	{% include '_meta.html' %}
</head>

<body class="flex flex-col color_theme_bg">

	<!-- **NOTE -   Modal_System_User-->
	<div id="Modal_System_User" tabindex="-1" aria-hidden="true"
		class="fixed top-0 left-0 right-0 items-center justify-center hidden w-full overflow-x-hidden overflow-y-auto z-60 md:inset-0 h-modal md:h-full">
		<div class="relative w-full h-full max-w-2xl p-4 md:h-auto">
			<!-- Modal content -->
			<div class="relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5">
				<!-- Modal header -->
				<div class="flex items-center justify-between pb-4 mb-4 border-b rounded-t sm:mb-5 dark:border-gray-600">
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white">
						System User <span class="g-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800"
							id="form-modal-title"></span>
					</h3>
					<button type="button" id="btn_modal_system_user_toggle"
						class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"
						data-modal-toggle="Modal_System_User">
						<svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd"
								d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
								clip-rule="evenodd"></path>
						</svg>
						<span class="sr-only">Close modal</span>
					</button>
				</div>
				<!-- Modal body -->
				<form id="form_system_user" action="javascript:submit_form_item('form_system_user')">
					<div class="grid gap-4 mb-4 sm:grid-cols-2">
						<div>
							<label for="username" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Login Name</label>
							<input type="text" name="username" class="input_box_form" placeholder="login Name" required>

						</div>

						<div>
							<label for="name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">User Name</label>
							<input type="text" name="name" class="input_box_form" placeholder="User Name">
						</div>

						<div>
							<label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">User password</label>
							<input type="password" name="password" required class="input_box_form" placeholder="password">
						</div>

						<div class="text-center">
							<img src="/static/dist/img/img_not_found.png" id="preview-img-of-item"
								class="w-24 h-24 p-1 mx-auto mb-2 rounded-full ring-2 ring-gray-300 dark:ring-gray-500" alt="ไม่มีรูป" />

							<div class="inline-flex border rounded-lg">
								<input type="file" class="w-full rounded-lg text_info" name="image_upload" accept="image/*" onchange="showPreview(event,'preview-img-of-item');" />
							</div>
						</div>

						<div>
							<label for="system_user_type_id" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">system_user_type</label>
							<select id="system_user_type_id" name="system_user_type_id" required class="input_box_form">
							</select>
						</div>
						<div class="sm:col-span-2">
							<label for="remark" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Remark</label>
							<textarea name="remark" rows="4" class="input_box_form" placeholder="หมายเหตุ"></textarea>
						</div>
					</div>
					<div class="flex justify-between">

						<button type="submit" class="w-32 border-blue-500 btn_block text_primary">
							<i class="fa fa-times-circle" aria-hidden="true"></i>
							<span class="ml-2">OK</span>
						</button>

						<button type="button" class="w-32 border-blue-500 btn_block text_danger" data-modal-toggle="Modal_System_User">
							<i class="fa fa-times-circle" aria-hidden="true"></i>
							<span class="ml-2">Cancel</span>
						</button>
					</div>

				</form>
			</div>
		</div>
	</div>

	<!-- **NOTE -   Modal_Owner_Parking-->
	<div id="Modal_Owner_Parking" tabindex="-1" aria-hidden="true"
		class="fixed top-0 left-0 right-0 z-50 items-center justify-center hidden w-full overflow-x-hidden overflow-y-auto md:inset-0 h-modal md:h-full">
		<div class="relative w-full h-full max-w-2xl p-4 md:h-auto">
			<!-- Modal content -->
			<div class="relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5">
				<!-- Modal header -->
				<div class="flex items-center justify-between pb-4 mb-4 border-b rounded-t sm:mb-5 dark:border-gray-600">
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white">
						ข้อมูลสถานที่
					</h3>
					<button type="button" id="btn_Modal_Owner_Parking_toggle"
						class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"
						data-modal-toggle="Modal_Owner_Parking">
						<svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd"
								d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
								clip-rule="evenodd"></path>
						</svg>
						<span class="sr-only">Close modal</span>
					</button>

				</div>
				<!-- Modal body -->
				<div>
					<form id="submit_apply_owner_parking_form" class="grid gap-4 mb-4 sm:grid-cols-2">
						<div class="flex items-center justify-center gap-2 sm:col-span-2">
							<img src="/static/dist/img/img_not_found.png" id="preview_image_Owner_Parking"
								class="w-1/3 p-1 mx-auto mb-2 rounded-full ring-2 ring-gray-300 dark:ring-gray-500" alt="ไม่มีรูป" />

							<div class="inline-flex w-1/3 text-center border rounded-lg">
								<input type="file" class="text-sm rounded-lg text_info" name="image_upload" accept="image/*"
									onchange="showPreview(event,'preview_image_Owner_Parking');" />
							</div>
						</div>

						<div class="sm:col-span-2">
							<label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">ชื่อ-สถานที่</label>
							<input type="text" autocomplete="off" name="app_configurations_name" class="input_box_form" placeholder="ชื่อ-สถานที่" required>
						</div>
						<div class="sm:col-span-2">
							<label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">ที่ตั้ง</label>
							<input type="text" autocomplete="off" name="app_configurations_address" class="input_box_form" placeholder="ที่ตั้ง" required>
						</div>
						<div class="sm:col-span-2">
							<label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">เบอร์โทร</label>
							<input type="text" autocomplete="off" name="app_configurations_phone" class="input_box_form" placeholder="เบอร์โทร">
						</div>
						<div class="sm:col-span-2">
							<label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">เลขที่ผู้เสียภาษี</label>
							<input type="text" autocomplete="off" name="app_configurations_vat_no" class="input_box_form" placeholder="เลขที่ผู้เสียภาษี">
						</div>
						<div class="sm:col-span-2">
							<label for="remark" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">หมายเหตุ</label>
							<textarea name="app_configurations_remark" rows="4" class="input_box_form" placeholder="หมายเหตุ"></textarea>
						</div>
					</form>
					<div class="flex justify-between">
						<button type="button" onclick="submit_apply_owner_parking()" class="w-32 border-blue-500 btn_block text_primary">
							<i class="fa fa-times-circle"></i>
							<span class="ml-2">OK</span>
						</button>

						<button type="button" class="w-32 border-blue-500 btn_block text_danger" data-modal-toggle="Modal_Owner_Parking">
							<i class="fa fa-times-circle"></i>
							<span class="ml-2">Close</span>
						</button>
					</div>

				</div>
			</div>
		</div>
	</div>

	<!-- **NOTE -   Modal_Parking_Lot-->
	<div id="Modal_Parking_Lot" tabindex="-1" aria-hidden="true"
		class="fixed top-0 left-0 right-0 z-50 items-center justify-center hidden w-full overflow-x-hidden overflow-y-auto md:inset-0 h-modal md:h-full">
		<div class="relative w-full h-full max-w-3xl p-4 md:h-auto">
			<!-- Modal content -->
			<div class="relative p-4 bg-white rounded-lg shadow dark:bg-gray-800 sm:p-5">
				<!-- Modal header -->
				<div class="flex items-center justify-between pb-4 mb-4 border-b rounded-t sm:mb-5 dark:border-gray-600">
					<h3 class="text-lg font-semibold text-gray-900 dark:text-white">
						Modal_Parking_Lot
					</h3>
					<button type="button" id="btn_Modal_Parking_Lot_toggle"
						class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white"
						data-modal-toggle="Modal_Parking_Lot">
						<svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd"
								d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
								clip-rule="evenodd"></path>
						</svg>
						<span class="sr-only">Close modal</span>
					</button>

				</div>
				<!-- Modal body -->

				<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
					<template id="template_parking_lot">
						<tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 ">
							<th scope="row" class="flex items-center px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white">
								<div class="hidden" name="parking_lot_id">1</div>
								<i class="text-blue-400 fa-solid fa-square-parking fa-3x"></i>
								<div class="pl-3">
									<div contenteditable="true" name="parking_lot_name" class="text-base font-semibold">parking</div>
									<div contenteditable="true" name="parking_lot_detail" class="font-normal text-gray-500">detail</div>
									<div class="border border-gray-600"></div>
									<div class="mt-2 font-normal text-gray-500 "><i class="mx-2 text-blue-600 fa-solid fa-arrow-right-to-bracket"></i><span></span></div>
									<div class="mt-2 font-normal text-gray-500 "><i class="mx-2 text-orange-600 fa-solid fa-arrow-right-from-bracket"></i><span></span></div>

								</div>
							</th>
							<td class="px-6 py-4">
								<span class="p-2" contenteditable="true" name="parking_lot_limit">9999</span>
							</td>
							<td class="px-6 py-4">
								<div class="flex items-center">
									<div class="h-2.5 w-2.5 rounded-full bg-green-400 mr-2"></div>
									<span contenteditable="true" name="parking_lot_value">0</span>
								</div>
							</td>
							<td class="px-6 py-4" name="parking_lot_control_btn">

							</td>
						</tr>
					</template>
					<template id="template_parking_lot_control_btn">
						<div class="flex flex-col gap-1">
							<a role="button" onclick="apply_parking_lot(this.parentElement.parentElement.parentElement)" class=" dark:text-blue-500 hover:underline"><i
									class="text-teal-500 fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</a>
							<a role="button" onclick="remove_parking_lot(this.parentElement.parentElement.parentElement)" class=" dark:text-blue-500 hover:underline"><i
									class="text-red-500 fa-regular fa-square-minus"></i>
								ลบรายการ</a>
						</div>
					</template>
					<template id="template_parking_lot_submit_btn">
						<div class="flex flex-col gap-1">
							<a role="button" onclick="apply_parking_lot(this.parentElement.parentElement.parentElement)" class=" dark:text-blue-500 hover:underline"><i
									class="text-teal-500 fa-regular fa-pen-to-square"></i> บันทึกข้อมูล</a>
							<a role="button" onclick="remove_parking_lot(this.parentElement.parentElement.parentElement)" class=" dark:text-blue-500 hover:underline"><i
									class="text-orange-500 fa-regular fa-trash-can"></i>
								ยกเลิกรายการ</a>
						</div>
					</template>

					<table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
						<thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
							<tr>
								<th scope="col" class="px-6 py-3">
									ชื่อ-ลานจอด
								</th>
								<th scope="col" class="px-6 py-3">
									ขนาด ลานจอด
								</th>
								<th scope="col" class="px-6 py-3">
									สถานะ
								</th>
								<th scope="col" class="px-6 py-3">
									การจัดการ
								</th>
							</tr>
						</thead>
						<tbody id="tbody_parking_lot">
						</tbody>

					</table>
					<div class="p-4 text-center">
						<a role="button" id="btn_parking_lot_add_item" onclick="add_parking_lot()" class="text-center dark:text-blue-500 hover:underline"><i
								class="text-teal-500 fa-regular fa-square-plus"></i> สร้าง รายการ</a>
					</div>


				</div>

			</div>
		</div>
	</div>

	<div class="drawer lg:drawer-open ">
		<input id="side-drawer" type="checkbox" class="drawer-toggle" />
		<div class="relative flex flex-col px-2 drawer-content">
			{% include '_nav_bar.html' %}
			<!-- Page content here -->
			<div class="bg-base-200">

				<div class="mb-4 border-b border-gray-200 dark:border-gray-700">
					<ul class="flex flex-wrap -mb-px text-sm font-medium text-center" data-tabs-toggle="#page_TabContent" role="tablist">

						<li class="mr-2" role="presentation">
							<button class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"
								id="config-tab" data-tabs-target="#config_tab_target" type="button" role="tab" aria-controls="dashboard" aria-selected="false">
								<i class="fa-solid fa-xl fa-gears"></i> Config System</button>
						</li>
						<li class="mr-2" role="presentation">
							<button class="inline-block p-4 border-b-2 rounded-t-lg" id=" system_user_tab" onclick="get_systems_user()" data-tabs-target="#system_user_tab_target"
								type="button" role="tab" aria-controls="system_user_tab_content" aria-selected="false"><i class="fa-solid fa-xl fa-users-gear"></i> System
								Users</button>
						</li>

					</ul>
				</div>
				<div id="page_TabContent">

					<div class="hidden p-4 rounded-lg " id="config_tab_target" role="tabpanel" aria-labelledby="dashboard-tab">
						<div class="">
							<div class="max-w-screen-xl px-4 py-4 mx-auto text-center ">
								<div class="max-w-screen-sm mx-auto mb-2">
									<p class="font-light text-gray-500 sm:text-xl dark:text-gray-400">หมวดการตั้งค่าระบบ</p>
								</div>
								<div class="grid gap-8 lg:gap-16 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-house"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											ข้อมูลสถานที่
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a role="button" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a role="button" onclick="show_dialog_parking_info()" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-square-parking"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											ลานจอดรถ
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a role="button" onclick="show_dialog_parking_lot(true)" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-person-shelter "></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											ช่องทางเข้าออก
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a role="button" href="/dashboard_gateway" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-file-invoice-dollar"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											Services Fee
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="/dashboard_service_fee" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-address-card"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											Member Management<br>การจัดการสมาชิก
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="/member_manager" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-road-barrier"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											Gate Control Devices
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="/dashboard_gate_control_devices" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-stamp"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											E-Stamp Devices
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="/dashboard_estamp_devices" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-red-500 fa-5x fa-solid fa-cash-register"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											E-Payment Devices
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="#" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-print"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											Document Printer
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="/dashboard_document" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>

									<div class="text-center text-gray-500 dark:text-gray-400">
										<i class="py-8 mx-auto text-blue-500 fa-5x fa-solid fa-database"></i>
										<h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
											Data Base
										</h3>
										<p>PARK_POS</p>
										<ul class="flex justify-center mt-4 space-x-4">
											<li>
												<a href="#" class="text-[#39569c] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-xl fa-circle-info"></i>
												</a>
											</li>
											<li>
												<a href="#" class="text-[#00acee] hover:text-gray-900 dark:hover:text-white">
													<i class="fa-solid fa-sliders fa-xl"></i>
												</a>
											</li>
											<li>
												<a href="#" class="">
													<span class="fa-stack ">
														<i class="fa-solid fa-print fa-stack-xl"></i>
														<i class="text-red-400 fa-solid fa-ban fa-stack-2x"></i>
													</span>
												</a>
											</li>

										</ul>
									</div>
								</div>

							</div>
						</div>
					</div>
					<div class="hidden p-4 rounded-lg " id="system_user_tab_target" role="tabpanel" aria-labelledby="system_user_tab">
						<div class="relative overflow-x-auto text-gray-500 shadow-md sm:rounded-lg ">
							<table id="system_user_table" class="w-full display dark:text-gray-400">

							</table>
							<div class="p-4 mb-8 text-center">
								<a role="button" id="btn_parking_lot_add_item" onclick="manager_system_user()" class="text-center dark:text-blue-500 hover:underline"><i
										class="text-teal-500 fa-regular fa-square-plus"></i> สร้างผู้ใช้งาน</a>
							</div>
						</div>
					</div>
				</div>

			</div>

		</div>

		{% include '_side_menu_bar.html' %}
	</div>

	{% include '_footer.html' %}
</body>
{% include '_script.html' %}


<script>
	const API_SYSTEM_USER = "/api/systems_user/"
	let current_system_user_id = 0;
	async function get_systems_user() {
		const data = await fetchApi(`${API_SYSTEM_USER}system_user_type`, "get", null, "json");
		let html_system_user_type = "";
		for (let i = 0; i < data.length; i++) {
			const _s = data[i].System_User_Type;
			const _temp = `<option value="${_s.id}">${_s.user_type}</option>`;
			html_system_user_type += _temp;
		}

		document.getElementById('system_user_type_id').innerHTML = html_system_user_type;
		const columns_table = [
			{
				data: "System_User.id",
				title: "ID",
				name: "ID",
				render: function (data, type) {
					return String(data).padStart(5, "0");
				},
			},
			{
				data: "System_User.id",
				title: "จัดการ",
				orderable: false,
				render: function (data, type, row) {
					return `<div class="inline-flex border border-blue-600 rounded-md shadow-sm" role="group">
								<a class="btn_tool" onclick="manager_system_user(${data})"> <i class="fas fa-user-edit"></i></a>
								<a class="btn_tool" onclick="remove_system_user(${data})"><i class="far fa-trash-alt"></i></a>
							</div>`;
				},
			},
			{
				data: "System_User.pictureUrl",
				title: "pictureUrl",
				orderable: false,
				render: function (data) {
					if (data == "") {
						return "Not Image"
					}
					return `<div class="image">
								<img src="${data}" class="w-10 h-10 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500" alt="User Image">
							</div>`;
				}
			},
			{
				data: "System_User.username",
				title: "Login name",
			},
			{
				data: "System_User.name",
				title: "ชื่อสมาชิก",
			},
			{
				data: "System_User.createDate",
				title: "วันลงทะเบียน",
				render: function (data) {
					//let _d = moment(data);
					//return _d.fromNow();
					return moment(data);
				}
			},
			{
				data: "System_User.create_by",
				title: "create_by",
			},
			{
				data: "System_User.status",
				title: "status",
			},
			{
				data: "System_User_Type.user_type",
				title: "user_type",
			},
			{
				data: "System_User.remark",
				title: "หมายเหตุ",
				orderable: false,
			},
		];

		//debug(columns_table)
		headers = await get_headers();

		let system_user_table = $("#system_user_table").DataTable({

			//dom: "Blfip",
			dom: '<"top"iB>rt<"bottom"flp><"clear">',
			//dom: 'Plfrtip',
			buttons: [
				"csv",
				'excel',
				"print",
				"colvis",
			],
			columnDefs: columnDefs,
			destroy: true,
			autoWidth: false,
			pageLength: 10,
			scrollCollapse: true,
			scrollY: "50vh",
			sScrollX: true,
			//fixedColumns: true,
			// "paging": false
			// data: dataSet,
			columns: columns_table,
			order: [[0, "desc"]],
			processing: true,
			serverSide: true,
			search: {
				return: true,
			},
			ajax: {
				headers: headers,
				type: "GET",
				url: `${API_SYSTEM_USER}datatable`,
				data: function (d) {
					d.table = "system_user_table";
				},
				error: function (xhr, textStatus, errorThrown) {
					window.location.reload();
				},
			},
		});


	}
	get_systems_user();
	async function remove_system_user(id) {
		if (!(await dialog_confirm())) return;

		let _reply = await fetchApi(`${API_SYSTEM_USER}${id}`, "delete", null, "json");
		//debug(_reply);
		if (_reply.success == true) {
			Swal.fire({
				icon: "info",
				title: "Successful",
				html: _reply.msg,
			}).then(() => {
				window.location.reload();
			});
		} else {
			debug(_reply)
			toastMixin.fire({
				title: JSON.stringify(_reply),
				icon: "error",
			});
		}

	}

	async function submit_form_item(id_form) {

		const _from_e = document.getElementById(id_form);
		if (_from_e == null) {
			Swal.fire(
				'Form data error',
				id_form,
				'error'
			)
		}
		const _api_path = API_SYSTEM_USER;
		//debug(_from_e.elements.length);
		const formData = new FormData();
		if (current_system_user_id > 0) {
			formData.append("id", current_system_user_id);
		}
		for (let i = 0; i < _from_e.elements.length; i++) {
			let _f_e = _from_e.elements[i];
			if (_f_e.name != "") {
				let k = _f_e.name;
				let v = _f_e.value;

				if (k == "image_upload" & v != "") {

					formData.append(k, await dataURLtoFile(document.getElementById("preview-img-of-item").src, v));
					debug("form is already uploaded file")
					continue;
				}
				if (_f_e.name == "password" & _f_e.value == "*") continue;
				formData.append(k, v);

				debug("key :" + k + " : " + v);

			}
		}

		//debug(formData)
		let _reply = await fetchApi(_api_path, "post", formData, "json");
		//debug(_reply);
		if (!!_reply) {
			if (_reply.success == true) {
				Swal.fire({
					icon: "info",
					title: "Successful",
					html: _reply.msg,
				}).then(() => {
					//window.location.reload();
					get_systems_user();
					document.getElementById('btn_modal_system_user_toggle').click();
				});
			} else {
				debug(_reply)
				toastMixin.fire({
					title: JSON.stringify(_reply),
					icon: "error",
				});
			}
		}
	}

	async function manager_system_user(id = 0) {
		current_system_user_id = id;
		if (id == 0) {
			document.getElementById("form-modal-title").innerText = "ADD MODE";
		} else {
			document.getElementById("form-modal-title").innerText = "EDIT MODE ID :" + id;

			let _datas = await fetchApi(`${API_SYSTEM_USER}?id=${id}`, "get", null, "json");
			if (!!_datas) {
				const _system_user = _datas.System_User;
				if (_system_user.id) {
					const _from_e = document.getElementById("form_system_user");
					for (let i = 0; i < _from_e.elements.length; i++) {
						let _f_e = _from_e.elements[i];

						if (_f_e.name != "") {
							if (_f_e.name == "image_upload") {
								document.getElementById("preview-img-of-item").src = _system_user["pictureUrl"]
								//debug(document.getElementById("preview-img-of-item").src)
								continue;
							}
							if (_f_e.name == "password") {
								_f_e.value = "*"
								continue;
							}

							_f_e.value = _system_user[_f_e.name]
						}

					}
				} else {
					debug(_system_user)
					toastMixin.fire({
						title: JSON.stringify(_system_user),
						icon: "error",
					});
					return;
				}
			}
		}

		document.getElementById('btn_modal_system_user_toggle').click();
	}
	//get_systems_user();
	//manager_system_user();
</script>

<script>

	async function show_dialog_parking_lot(v) {
		if (v) {
			let _result = await fetchApi("/api/function/parking_lot_list", "get", null, "json");
			if (_result.status == 200) {
				PARKING_LOT_LIST = _result.data;
				print_info(_result);
				const tbody = document.getElementById("tbody_parking_lot");
				const temp = document.getElementById("template_parking_lot");

				const temp_btn_control = document.getElementById("template_parking_lot_control_btn");
				tbody.innerHTML = "";
				await PARKING_LOT_LIST.forEach((value, index, array) => {
					print_info(value);
					const parking_lot = value.Parking_Lot;
					const _c = temp.content.cloneNode(true);
					const _c_btn_control = temp_btn_control.content.cloneNode(true);

					_c.querySelectorAll('[name="parking_lot_id"]')[0].innerText = parking_lot.id;
					_c.querySelectorAll('[name="parking_lot_name"]')[0].innerText = parking_lot.name;
					_c.querySelectorAll('[name="parking_lot_detail"]')[0].innerText = parking_lot.detail;
					_c.querySelectorAll('[name="parking_lot_limit"]')[0].innerText = parking_lot.limit;
					_c.querySelectorAll('[name="parking_lot_value"]')[0].innerText = parking_lot.value;

					_c.querySelectorAll('[name="parking_lot_control_btn"]')[0].appendChild(_c_btn_control);


					tbody.appendChild(_c);
				});

			}
		}
		document.getElementById('btn_Modal_Parking_Lot_toggle').click();
	}
	let parking_lot_add_mode = false;
	async function add_parking_lot() {
		if (!parking_lot_add_mode) {
			const temp = document.getElementById("template_parking_lot");
			const _c = temp.content.cloneNode(true);
			const tbody = document.getElementById("tbody_parking_lot");
			const _th = _c.querySelectorAll("th");
			const _td = _c.querySelectorAll("td");
			const temp_btn_control = document.getElementById("template_parking_lot_submit_btn");
			const _c_btn_control = temp_btn_control.content.cloneNode(true);
			_th[0].querySelectorAll("div")[0].innerText = 0;
			debug(_td[2]);
			_td[2].appendChild(_c_btn_control);
			tbody.appendChild(_c);
			parking_lot_add_mode = true;
		} else {
			await toastMixin.fire({
				title: "คำแนะนำ",
				icon: "warning",
				text: "มีรายการที่อยู่ระหว่างการดำเนินการ!",
			});
		}
	}

	/**
	* @param {HTMLTableRowElement} row 
	*/
	async function apply_parking_lot(row) {
		const _parking_lot_id = row.getElementsByTagName("th")[0].getElementsByTagName("div")[0]
		const _parking_lot_name = row.getElementsByTagName("th")[0].getElementsByTagName("div")[1].getElementsByTagName("div")[0].innerText
		const _parking_lot_detail = row.getElementsByTagName("th")[0].getElementsByTagName("div")[1].getElementsByTagName("div")[1].innerText

		const _parking_lot_limit = row.getElementsByTagName("td")[0].getElementsByTagName("span")[0].innerText
		const _parking_lot_value = row.getElementsByTagName("td")[1].getElementsByTagName("span")[0].innerText

		const _parking_lot_control_btn = row.getElementsByTagName("td")[2]

		if (isNaN(parseInt(_parking_lot_limit))) {
			await Swal.fire({
				icon: 'error',
				title: _parking_lot_limit,
				text: "ข้อมูลไม่ถูกต้อง",
				footer: 'ข้อผิดพลาด'
			})
			return false;
		}
		if (isNaN(parseInt(_parking_lot_value))) {
			await Swal.fire({
				icon: 'error',
				title: _parking_lot_value,
				text: "ข้อมูลไม่ถูกต้อง",
				footer: 'ข้อผิดพลาด'
			})
			return false;
		}
		const formData = new FormData();
		formData.append("id", _parking_lot_id.innerText);
		formData.append("name", _parking_lot_name);
		formData.append("detail", _parking_lot_detail);
		formData.append("limit", _parking_lot_limit);
		formData.append("value", _parking_lot_value);

		let _reply = await fetchApi("/api/function/parking_lot", "post", formData, "json");
		debug(_reply);
		if (!!_reply) {
			if (_reply.success == true) {

				Swal.fire({
					icon: "info",
					title: "Successful",
					text: "Successful create data is ID:" + _reply.data.id,
				});
				if (_parking_lot_id.innerText == "0") {
					parking_lot_add_mode = false;
					const temp_btn_control = document.getElementById("template_parking_lot_control_btn");
					const _c_btn_control = temp_btn_control.content.cloneNode(true);
					_parking_lot_control_btn.innerHTML = "";
					_parking_lot_control_btn.appendChild(_c_btn_control);
				}
				_parking_lot_id.innerText = _reply.data.id;
			} else {
				debug(_reply)
				toastMixin.fire({
					title: JSON.stringify(_reply),
					icon: "error",
				});
			}
		}
	}
	/**
	* @param {HTMLTableRowElement} row 
	*/
	async function remove_parking_lot(row) {
		const _parking_lot_id = row.getElementsByTagName("th")[0].getElementsByTagName("div")[0].innerText
		const tbody = document.getElementById("tbody_parking_lot");
		if (_parking_lot_id == "0") {
			tbody.deleteRow(row.rowIndex - 1);
			parking_lot_add_mode = false;
			return;
		}
		if (!(await dialog_confirm())) return;
		let _reply = await fetchApi("/api/function/parking_lot?id=" + _parking_lot_id, "delete", null, "json");
		debug(_reply);
		if (!!_reply) {
			if (_reply.success == true) {
				Swal.fire({
					icon: "info",
					title: "Successful",
					text: _reply.msg,
				});
				tbody.deleteRow(row.rowIndex - 1);
			} else {
				debug(_reply)
				toastMixin.fire({
					title: "ข้อผิดพลาด",
					icon: "error",
					text: _reply.msg,
				});
			}
		}

	}

</script>

<script>
	function show_dialog_owner(data) {
		const _from_e = document.getElementById("submit_apply_owner_parking_form");
		for (let i = 0; i < _from_e.elements.length; i++) {
			let _f_e = _from_e.elements[i];
			if (_f_e.name != "") {
				let k = _f_e.name;
				let v = data[k];
				//debug("key :" + k + " : " + v);
				if (k == "image_upload") {
					document.getElementById("preview_image_Owner_Parking").src = data["app_configurations_image"];
					continue;
				}
				_f_e.value = v;
			}
		}
		document.getElementById('btn_Modal_Owner_Parking_toggle').click();
	}

	async function show_dialog_parking_info() {
		const _reply = await fetchApi("/api/function/app_config_owner", "get", null, "json");
		if (!!_reply) {
			if (_reply.success == true) {
				const _data = new Object();
				for (let i = 0; i < _reply.data.length; i++) {
					const e = _reply.data[i].App_Configurations;
					_data[e.key] = e.value;
				}
				show_dialog_owner(_data);
			} else {
				debug(_reply)
				toastMixin.fire({
					title: JSON.stringify(_reply),
					icon: "error",
				});
			}
		}
	}

	async function submit_apply_owner_parking() {
		const _from_e = document.getElementById("submit_apply_owner_parking_form");
		const formData = new FormData();
		if (current_system_user_id > 0) {
			formData.append("id", current_system_user_id);
		}
		for (let i = 0; i < _from_e.elements.length; i++) {
			let _f_e = _from_e.elements[i];
			if (_f_e.name != "") {
				let k = _f_e.name;
				let v = _f_e.value;

				if (k == "image_upload" & v != "") {

					formData.append(k, await dataURLtoFile(document.getElementById("preview_image_Owner_Parking").src, v));
					debug("form is already uploaded file")
					continue;
				}
				if (_f_e.name == "password" & _f_e.value == "*") continue;
				formData.append(k, v);

				//debug("key :" + k + " : " + v);

			}
		}

		//debug(formData)
		let _reply = await fetchApi("/api/function/app_config_owner", "post", formData, "json");
		//debug(_reply);
		if (!!_reply) {
			if (_reply.success == true) {
				Swal.fire({
					icon: "info",
					title: "Successful",
					html: _reply.msg,
				}).then(() => {
					//window.location.reload();

				});
			} else {
				debug(_reply)
				toastMixin.fire({
					title: JSON.stringify(_reply),
					icon: "error",
				});
			}
		}
	}

</script>



</html>